/*!
 * Pikaday
 *
 * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 * MAV: Changes made to "show" and "hide" to affect the wrapper html aswell.
 * MAV: adjustPosition rewritten
 */
function adjustElementToOtherElement(n,t){var i,e,f,c,l,o,u,r,s,h=0;if(n.style.position="absolute",i=t,e=n.offsetWidth,f=n.offsetHeight,c=window.innerWidth||document.documentElement.clientWidth,l=window.innerHeight||document.documentElement.clientHeight,o=window.pageYOffset||i.scrollTop,typeof document.getElementsByClassName("floating-actionbar")[0]!="undefined"&&(h=document.getElementsByClassName("floating-actionbar")[0].offsetHeight),typeof i.getBoundingClientRect=="function")s=i.getBoundingClientRect(),u=s.left,r=s.bottom+o;else for(u=i.offsetLeft,r=i.offsetTop+i.offsetHeight;i!=null;)u+=i.offsetLeft,r+=i.offsetTop,i=i.parent;u+e>c&&(u=u-e+t.offsetWidth);r+f+h>l+o&&r-f-t.offsetHeight-h>0&&(r=r-f-t.offsetHeight);n.style.left=u+"px";n.style.top=r+"px"}function pikaTrim(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function pikaHasClass(n,t){return(" "+n.className+" ").indexOf(" "+t+" ")!==-1}function pikaRemoveClass(n,t){n.className=pikaTrim((" "+n.className+" ").replace(" "+t+" "," "))}function pikaAddClass(n,t){pikaHasClass(n,t)||(n.className=n.className===""?t:n.className+" "+t)}function hideIfClickOutsideMyBounds(n,t){t=t||window.event;var i=t.target||t.srcElement,r=i;if(i){!hasEventListeners&&pikaHasClass(i,"pika-select")&&(i.onchange||(i.setAttribute("onchange","return;"),addEvent(i,"change",n._onChange)));do if(pikaHasClass(r,"pika-wrapper")||r===opts.trigger||pikaHasClass(r,"pika-button"))return;while(r=r.parentNode);n._v&&i!==opts.trigger&&r!==opts.trigger&&n.hide()}}function fixPikaWrapperPositionInDOM(){var t=document.getElementById("pika-wrapper"),n=t.parentNode,i;do n=n.parentNode;while(n!==null&&n.tagName!=="BODY");n!=null&&(n.appendChild(t),i=document.getElementById("pika-wrapper-time"),n.appendChild(i))}function DWClearDate(n){var t=Dynamicweb.UIControls.DatePicker.get_current();t.ClearDate(n)}function SetupCalendarOnfocus(n,t,i,r,u,f,e){var o=Dynamicweb.UIControls.DatePicker.get_current(),h,c,s;o.defaultDates[n]=u;o.names.push(n);typeof o.dict[n]=="undefined"&&(h=o.initPickaday(n,t,i,r,f,e),o.dict[n]=h);n==="ValidFrom_Editor"&&(c=o.dict.ValidFrom_Editor,console.log(c.getDate()));var l=document.getElementById("pika-time-currentName"),a=document.getElementById(n+"_calendar_btn"),v=document.getElementById(n+"_label");a.onclick=v.onclick=function(t){var f=document.getElementById("pika-wrapper-time"),i,u,r;for(pikaAddClass(f,"is-hidden"),l.value="",i=0;i<o.names.length;i++)u=o.names[i],r=o.dict[u],typeof r!="undefined"&&r.hide();o.SetupCalendarHead(o.dict[n]);o.dict[n].show();t.stopPropagation();t.preventDefault()};s=document.getElementById(n+"_calendar_time_btn");s!==null&&(s.onclick=function(t){for(var u,h,r,i=0;i<o.names.length;i++)o.dict[o.names[i]].hide();u=document.getElementById("pika-wrapper-time");pikaRemoveClass(u,"is-hidden");var s=document.getElementById("pika-time-currentName"),f=document.getElementById("pika-hour"),e=document.getElementById("pika-minute");adjustElementToOtherElement(u,this);h=o.dict[n];s.value=n;r=o.GetDate(n);r===null?(f.value=0,e.value=0):(f.value=r.getHours(),e.value=r.getMinutes());t.stopPropagation()})}if(function(n,t){"use strict";n.Pikaday=t()}(this,function(){"use strict";var e=!1,c=!!window.addEventListener,i=window.document,l=window.setTimeout,r=function(n,t,i,r){c?n.addEventListener(t,i,!!r):n.attachEvent("on"+t,i)},u=function(n,t,i,r){c?n.removeEventListener(t,i,!!r):n.detachEvent("on"+t,i)},v=function(n,t,r){var u;i.createEvent?(u=i.createEvent("HTMLEvents"),u.initEvent(t,!0,!1),u=o(u,r),n.dispatchEvent(u)):i.createEventObject&&(u=i.createEventObject(),u=o(u,r),n.fireEvent("on"+t,u))},nt=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},n=function(n,t){return(" "+n.className+" ").indexOf(" "+t+" ")!==-1},y=function(t,i){n(t,i)||(t.className=t.className===""?i:t.className+" "+i)},p=function(n,t){n.className=nt((" "+n.className+" ").replace(" "+t+" "," "))},a=function(n){return/Array/.test(Object.prototype.toString.call(n))},t=function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())},tt=function(n){var t=n.getDay();return t===0||t===6},it=function(n){return n%4==0&&n%100!=0||n%400==0},w=function(n,t){return[31,it(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},s=function(n){t(n)&&n.setHours(0,0,0,0)},h=function(n,t){return n.getTime()===t.getTime()},o=function(n,i,r){var u,f;for(u in i)f=n[u]!==undefined,f&&typeof i[u]=="object"&&i[u]!==null&&i[u].nodeName===undefined?t(i[u])?r&&(n[u]=new Date(i[u].getTime())):a(i[u])?r&&(n[u]=i[u].slice(0)):n[u]=o({},i[u],r):(r||!f)&&(n[u]=i[u]);return n},b=function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),n.month>11&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n},k={field:null,bound:undefined,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:undefined,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},d=function(n,t,i){for(t+=n.firstDay;t>=7;)t-=7;return i?n.i18n.weekdaysShort[t]:n.i18n.weekdays[t]},rt=function(n){var t=[];if(n.isEmpty)if(n.showDaysInNextAndPreviousMonths)t.push("is-outside-current-month");else return'<td class="is-empty"><\/td>';return n.isDisabled&&t.push("is-disabled"),n.isToday&&t.push("is-today"),n.isSelected&&t.push("is-selected"),n.isInRange&&t.push("is-inrange"),n.isStartRange&&t.push("is-startrange"),n.isEndRange&&t.push("is-endrange"),'<td data-day="'+n.day+'" class="'+t.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+n.year+'" data-pika-month="'+n.month+'" data-pika-day="'+n.day+'">'+n.day+"<\/button><\/td>"},ut=function(n,t,i){var r=new Date(i,0,1),u=Math.ceil(((new Date(i,t,n)-r)/864e5+r.getDay()+1)/7);return'<td class="pika-week">'+u+"<\/td>"},ft=function(n,t){return"<tr>"+(t?n.reverse():n).join("")+"<\/tr>"},et=function(n){return"<tbody>"+n.join("")+"<\/tbody>"},ot=function(n){var t,i=[];for(n.showWeekNumber&&i.push("<th><\/th>"),t=0;t<7;t++)i.push('<th scope="col"><abbr title="'+d(n,t)+'">'+d(n,t,!0)+"<\/abbr><\/th>");return"<thead><tr>"+(n.isRTL?i.reverse():i).join("")+"<\/tr><\/thead>"},st=function(n,t,i,r,u){for(var c,f=n._o,y=i===f.minYear,p=i===f.maxYear,s='<div class="pika-title">',l,v,w=!0,h=!0,o=[],e=0;e<12;e++)o.push('<option value="'+(i===u?e-t:12+e-t)+'"'+(e===r?' selected="selected"':"")+(y&&e<f.minMonth||p&&e>f.maxMonth?'disabled="disabled"':"")+">"+f.i18n.months[e]+"<\/option>");for(l='<div class="pika-label">'+f.i18n.months[r]+'<select class="pika-select pika-select-month" tabindex="-1">'+o.join("")+"<\/select><\/div>",a(f.yearRange)?(e=f.yearRange[0],c=f.yearRange[1]+1):(e=i-f.yearRange,c=1+i+f.yearRange),o=[];e<c&&e<=f.maxYear;e++)e>=f.minYear&&o.push('<option value="'+e+'"'+(e===i?' selected="selected"':"")+">"+e+"<\/option>");return v='<div class="pika-label">'+i+f.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+o.join("")+"<\/select><\/div>",s+=f.showMonthAfterYear?v+l:l+v,y&&(r===0||f.minMonth>=r)&&(w=!1),p&&(r===11||f.maxMonth<=r)&&(h=!1),t===0&&(s+='<button class="pika-prev'+(w?"":" is-disabled")+'" type="button"'+(h?"":" disabled")+">"+f.i18n.previousMonth+"<\/button>"),t===n._o.numberOfMonths-1&&(s+='<button class="pika-next'+(h?"":" is-disabled")+'" type="button"'+(h?"":" disabled")+">"+f.i18n.nextMonth+"<\/button>"),s+"<\/div>"},ht=function(n,t){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+ot(n)+et(t)+"<\/table>"},g=function(u){var f=this,o=f.config(u),s;f._onMouseDown=function(t){if(f._v){t=t||window.event;var i=t.target||t.srcElement;if(i)if(n(i,"is-disabled")||n(i.parentNode,"is-disabled")||(n(i,"pika-button")&&!n(i,"is-empty")?(f.setDate(new Date(i.getAttribute("data-pika-year"),i.getAttribute("data-pika-month"),i.getAttribute("data-pika-day"))),l(function(){f.hide()},100)):n(i,"pika-prev")?f.prevMonth():n(i,"pika-next")&&f.nextMonth()),n(i,"pika-select")||n(i,"pika-wrapper"))f._c=!0;else if(t.preventDefault)t.preventDefault();else return t.returnValue=!1,!1}};f._onChange=function(t){t=t||window.event;var i=t.target||t.srcElement;i&&(n(i,"pika-select-month")?f.gotoMonth(i.value):n(i,"pika-select-year")&&f.gotoYear(i.value))};f._onInputChange=function(n){var i;n.firedBy!==f&&(e?(i=moment(o.field.value,o.format,o.formatStrict),i=i&&i.isValid()?i.toDate():null):i=new Date(Date.parse(o.field.value)),t(i)&&f.setDate(i),f._v||f.show())};f._onInputFocus=function(){f.show()};f._onInputClick=function(){f.show()};f._onInputBlur=function(){var t=i.activeElement;do if(n(t,"pika-single"))return;while(t=t.parentNode);f._c||(f._b=l(function(){f.hide()},50));f._c=!1};f._onClick=function(t){var i=t.target||t.srcElement,u=i;if(i){!c&&n(i,"pika-select")&&(i.onchange||(i.setAttribute("onchange","return;"),r(i,"change",f._onChange)));do if(n(u,"pika-wrapper")||u===o.trigger||n(u,"pika-button"))return;while(u=u.parentNode);f._v&&i!==o.trigger&&u!==o.trigger&&f.hide()}};f.el=i.createElement("div");f.el.className="pika-single"+(o.isRTL?" is-rtl":"")+(o.theme?" "+o.theme:"");r(f.el,"mousedown",f._onMouseDown,!0);r(f.el,"touchend",f._onMouseDown,!0);r(f.el,"change",f._onChange);o.field&&(o.container?o.container.appendChild(f.el):o.bound?i.body.appendChild(f.el):o.field.parentNode.insertBefore(f.el,o.field.nextSibling),r(o.field,"change",f._onInputChange),o.defaultDate||(o.defaultDate=e&&o.field.value?moment(o.field.value,o.format).toDate():new Date(Date.parse(o.field.value)),o.setDefaultDate=!0));s=o.defaultDate;t(s)?o.setDefaultDate?f.setDate(s,!0):f.gotoDate(s):f.gotoDate(new Date);this.hide();r(o.trigger,"click",f._onInputClick);r(o.trigger,"focus",f._onInputFocus);r(o.trigger,"blur",f._onInputBlur)},f=i.getElementById("pika-wrapper");return g.prototype={options:null,config:function(n){var i,r,u;return this._o||(this._o=o({},k,!0)),this.options=n,i=o(this._o,n,!0),i.isRTL=!!i.isRTL,i.field=i.field&&i.field.nodeName?i.field:null,i.theme=typeof i.theme=="string"&&i.theme?i.theme:null,i.bound=!!(i.bound!==undefined?i.field&&i.bound:i.field),i.trigger=i.trigger&&i.trigger.nodeName?i.trigger:i.field,i.disableWeekends=!!i.disableWeekends,i.disableDayFn=typeof i.disableDayFn=="function"?i.disableDayFn:null,r=parseInt(i.numberOfMonths,10)||1,i.numberOfMonths=r>4?4:r,t(i.minDate)||(i.minDate=!1),t(i.maxDate)||(i.maxDate=!1),i.minDate&&i.maxDate&&i.maxDate<i.minDate&&(i.maxDate=i.minDate=!1),i.minDate&&this.setMinDate(i.minDate),i.maxDate&&this.setMaxDate(i.maxDate),a(i.yearRange)?(u=(new Date).getFullYear()-10,i.yearRange[0]=parseInt(i.yearRange[0],10)||u,i.yearRange[1]=parseInt(i.yearRange[1],10)||u):(i.yearRange=Math.abs(parseInt(i.yearRange,10))||k.yearRange,i.yearRange>100&&(i.yearRange=100)),i},toString:function(n){return t(this._d)?e?moment(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return e?moment(this._d):null},setMoment:function(n,t){e&&moment.isMoment(n)&&this.setDate(n.toDate(),t)},getDate:function(){return t(this._d)?new Date(this._d.getTime()):null},setDate:function(n,i){if(!n)return this._d=null,this._o.field&&(this._o.field.value="",v(this._o.field,"change",{firedBy:this})),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),t(n)){var r=this._o.minDate,u=this._o.maxDate;t(r)&&n<r?n=r:t(u)&&n>u&&(n=u);this._d=new Date(n.getTime());s(this._d);this.gotoDate(this._d);this._o.field&&(this._o.field.value=this.toString(),v(this._o.field,"change",{firedBy:this}));i||typeof this._o.onSelect!="function"||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(n){var r=!0;if(t(n)){if(this.calendars){var f=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),u=n.getTime();i.setMonth(i.getMonth()+1);i.setDate(i.getDate()-1);r=u<f.getTime()||i.getTime()<u}r&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths));this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=b(this.calendars[0]);for(var n=1;n<this._o.numberOfMonths;n++)this.calendars[n]=b({month:this.calendars[0].month+n,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())},setMinDate:function(n){s(n);this._o.minDate=n;this._o.minYear=n.getFullYear();this._o.minMonth=n.getMonth();this.draw()},setMaxDate:function(n){s(n);this._o.maxDate=n;this._o.maxYear=n.getFullYear();this._o.maxMonth=n.getMonth();this.draw()},setStartRange:function(n){this._o.startRange=n},setEndRange:function(n){this._o.endRange=n},draw:function(n){var i;if(this._v||n){var t=this._o,f=t.minYear,e=t.maxYear,r=t.minMonth,u=t.maxMonth,o="";for(this._y<=f&&(this._y=f,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=e&&(this._y=e,!isNaN(u)&&this._m>u&&(this._m=u)),i=0;i<t.numberOfMonths;i++)o+='<div class="pika-lendar">'+st(this,i,this.calendars[i].year,this.calendars[i].month,this.calendars[0].year)+this.render(this.calendars[i].year,this.calendars[i].month)+"<\/div>";if(this.el.innerHTML=o,t.bound&&t.field.type!=="hidden"&&l(function(){t.trigger.focus()},1),typeof this._o.onDraw=="function")this._o.onDraw(this)}},adjustPosition:function(){adjustElementToOtherElement(f,this._o.trigger)},render:function(n,i){var r=this._o,k=new Date,l=w(n,i),u=new Date(n,i,1).getDay(),d=[],c=[],e,y,et;s(k);r.firstDay>0&&(u-=r.firstDay,u<0&&(u+=7));for(var g=i===0?11:i-1,ot=i===11?0:i+1,nt=i===0?n-1:n,st=i===11?n+1:n,ct=w(nt,g),a=l+u,v=a;v>7;)v-=7;for(a+=7-v,e=0,y=0;e<a;e++){var f=new Date(n,i,1+(e-u)),lt=t(this._d)?h(f,this._d):!1,at=h(f,k),it=e<u||e>=l+u,o=1+(e-u),p=i,b=n,vt=r.startRange&&h(r.startRange,f),yt=r.endRange&&h(r.endRange,f),pt=r.startRange&&r.endRange&&r.startRange<f&&f<r.endRange,wt=r.minDate&&f<r.minDate||r.maxDate&&f>r.maxDate||r.disableWeekends&&tt(f)||r.disableDayFn&&r.disableDayFn(f);it&&(e<u?(o=ct+o,p=g,b=nt):(o=o-l,p=ot,b=st));et={day:o,month:p,year:b,isSelected:lt,isToday:at,isDisabled:wt,isEmpty:it,isStartRange:vt,isEndRange:yt,isInRange:pt,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths};c.push(rt(et));++y==7&&(r.showWeekNumber&&c.unshift(ut(e-u,i,n)),d.push(ft(c,r.isRTL)),c=[],y=0)}return ht(r,d)},isVisible:function(){return this._v},show:function(){this._v||(p(this.el,"is-hidden"),p(f,"is-hidden"),this._v=!0,this.draw(),r(i,"click",this._onClick),this.adjustPosition(),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){var n=this._v;n!==!1&&(u(i,"click",this._onClick),f.style.position="static",f.style.left="auto",f.style.top="auto",y(f,"is-hidden"),y(this.el,"is-hidden"),this._v=!1,n!==undefined&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){this.hide();u(this.el,"mousedown",this._onMouseDown,!0);u(this.el,"touchend",this._onMouseDown,!0);u(this.el,"change",this._onChange);this._o.field&&(u(this._o.field,"change",this._onInputChange),this._o.bound&&(u(this._o.trigger,"click",this._onInputClick),u(this._o.trigger,"focus",this._onInputFocus),u(this._o.trigger,"blur",this._onInputBlur)));this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},g}),fixPikaWrapperPositionInDOM(),typeof Dynamicweb=="undefined")var Dynamicweb={};typeof Dynamicweb.UIControls=="undefined"&&(Dynamicweb.UIControls={});Dynamicweb.UIControls.DatePicker=function(){function t(){function r(){var u=f.value,e,o,r,s;u!==""&&typeof u!="undefined"&&(e=parseInt(t.value),o=parseInt(i.value),isNaN(e)||isNaN(o)||(r=n.GetDate(u),r===null&&(r=new Date),r.setMinutes(o),r.setHours(e),s=n.dict[u],n.UpdateCalenderDateFields(s,r,u)))}function e(n){n.onchange=function(){n.value===""&&(n.value=0);r()}}function o(n,t){var i;n.onkeydown=function(){i=n.value};n.onkeyup=function(){n.value!==i&&t()};n.onpaste=function(){t()}}var s=document.getElementById("pika-wrapper"),u=document.getElementById("pika-wrapper-time"),t=document.getElementById("pika-hour"),i=document.getElementById("pika-minute"),f=document.getElementById("pika-time-currentName");e(t);e(i);o(t,r);o(i,r);window.onclick=function(){pikaAddClass(u,"is-hidden");f.value=""};u.onclick=function(n){n.stopPropagation()}}this.dict={};this.defaultDates={};this.names=[];var n=this;t()};Dynamicweb.UIControls.DatePicker._instance=null;Dynamicweb.UIControls.DatePicker.get_current=function(){return Dynamicweb.UIControls.DatePicker._instance||(Dynamicweb.UIControls.DatePicker._instance=new Dynamicweb.UIControls.DatePicker),Dynamicweb.UIControls.DatePicker._instance};Dynamicweb.UIControls.DatePicker.prototype.initPickaday=function(n,t,i,r,u,f){function c(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t].substring(0,1));return i}var o,s=document.getElementById(n+"_datepicker"),h,e;return o=s.value!==""?new Date(s.value):r===""?new Data:new Date(r),o.getFullYear()===2999&&(o=new Date),typeof getMonthNames!="undefined"&&(f=getMonthNames()),typeof getDayNames!="undefined"&&(u=getDayNames()),h=this,e=new Pikaday({field:s,firstDay:1,defaultDate:o,setDefaultDate:!0,minDate:new Date(t,0,1),maxDate:new Date(i,11,31),showWeekNumber:!0,onSelect:function(t){h.UpdateCalenderDateFieldsUsingLabelAsTime(e,t,n);e.hide()},yearRange:[t,i],i18n:{previousMonth:'<i class="md md-keyboard-arrow-left pika-prev"><\/i>',nextMonth:'<i class="md md-keyboard-arrow-right pika-next"><\/i>',months:f,weekdays:u,weekdaysShort:c(u)},container:document.getElementById("container"),bound:!1,trigger:document.getElementById(n+"_calendar_btn")}),this.SetupCalendarHead(e),e};Dynamicweb.UIControls.DatePicker.prototype.IsNotSet=function(n){var t=document.getElementById(n+"_notSet");return t?t.value.toLowerCase()==="true":!1};Dynamicweb.UIControls.DatePicker.prototype.GetDate=function(n){var t;return this.IsNotSet(n)?null:(t=document.getElementById(n+"_calendar"),t.value==="")?null:new Date(t.value)};Dynamicweb.UIControls.DatePicker.prototype.SetDate=function(n,t){var r,i,f;if(typeof t=="undefined"||t===null){this.ClearDate(n);return}r=this.dict[n];i=r.getDate();(i.getFullYear()!==t.getFullYear()||i.getMonth()!==t.getMonth()||i.getDate()!==t.getDate())&&r.setDate(t,!1);var c=document.getElementById("DatePicker_"+n),e=document.getElementById(n+"_calendar"),u="";if(t!==null){var o=t.getMinutes()<9?"0"+t.getMinutes():t.getMinutes(),s=t.getHours()<9?"0"+t.getHours():t.getHours(),h=t.getDate()<9?"0"+t.getDate():t.getDate();u=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+h+" "+s+":"+o}e.value=u;f=document.getElementById(n+"_notSet");f.value="False"};Dynamicweb.UIControls.DatePicker.prototype.ClearDate=function(n){var r=document.getElementById(n+"_label"),u=document.getElementById(n+"_notSet"),t,i;u&&(t=this.dict[n],typeof t!="undefined"&&t.setDate(new Date),i=null,this.defaultDates[n]!==""&&(i=new Date(this.defaultDates[n])),this.SetDate(n,i),r&&(r.innerHTML=document.getElementById("DWCalendarNotSetString").value),u.value="True")};Dynamicweb.UIControls.DatePicker.prototype.UppdateCalendarDate=function(n,t){if(n.getFullYear()===2999)this.ClearDate(t);else{var i=this.dict[t];this.UpdateCalenderDateFields(i,n,t)}};Dynamicweb.UIControls.DatePicker.prototype.UpdateCalenderDateFieldsUsingLabelAsTime=function(n,t,i){var r=this.GetDate(i);r!==null&&(t.setMinutes(r.getMinutes()),t.setHours(r.getHours()));this.UpdateCalenderDateFields(n,t,i)};Dynamicweb.UIControls.DatePicker.prototype.UpdateCalenderDateFields=function(n,t,i){var u=document.getElementById(i+"_label"),f=n.options.i18n.weekdays[t.getDay()].substring(0,3),e=n.options.i18n.months[t.getMonth()].substring(0,3),a=t.getDate(),o=t.getMinutes()<9?"0"+t.getMinutes():t.getMinutes(),s=t.getHours()<9?"0"+t.getHours():t.getHours(),h=document.getElementById(i+"_calendar_time_btn"),c=h!==null,l=t.getDate()<9?"0"+t.getDate():t.getDate(),r=f+", "+l+" "+e+" "+t.getFullYear();c&&(r=r+" "+s+":"+o);u.innerText=r;this.SetDate(i,t)};Dynamicweb.UIControls.DatePicker.prototype.SetupCalendarHead=function(n){var t=n.getDate(),i=t.getFullYear(),r=n.options.i18n.months[t.getMonth()].substring(0,3),u=n.options.i18n.weekdays[t.getDay()].substring(0,3);document.getElementById("datepicker-year").innerText=i;document.getElementById("datepicker-date").innerText=u+", "+r+" "+t.getDate()};